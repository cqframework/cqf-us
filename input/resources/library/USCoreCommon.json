{
  "resourceType": "Library",
  "id": "USCoreCommon",
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "http://fhir.org/guides/cqf/us/common/Library/USCoreCommon",
  "version": "0.1.0",
  "name": "USCoreCommon",
  "relatedArtifact": [ {
    "type": "depends-on",
    "display": "USCore model information",
    "resource": "http://hl7.org/fhir/Library/USCore-ModelInfo"
  }, {
    "type": "depends-on",
    "display": "FHIR model information",
    "resource": "http://fhir.org/guides/cqf/common/Library/FHIR-ModelInfo|4.0.1"
  }, {
    "type": "depends-on",
    "display": "Library FHIRHelpers",
    "resource": "http://fhir.org/guides/cqf/us/common/Library/FHIRHelpers|4.1.000"
  }, {
    "type": "depends-on",
    "display": "Code system LOINC",
    "resource": "http://loinc.org"
  }, {
    "type": "depends-on",
    "display": "Code system SNOMEDCT",
    "resource": "http://snomed.info/sct"
  }, {
    "type": "depends-on",
    "display": "Code system CVX",
    "resource": "http://hl7.org/fhir/sid/cvx"
  }, {
    "type": "depends-on",
    "display": "Code system ActCode",
    "resource": "http://terminology.hl7.org/CodeSystem/v3-ActCode"
  }, {
    "type": "depends-on",
    "display": "Code system RoleCode",
    "resource": "http://terminology.hl7.org/CodeSystem/v3-RoleCode"
  }, {
    "type": "depends-on",
    "display": "Code system Diagnosis Role",
    "resource": "http://terminology.hl7.org/CodeSystem/diagnosis-role"
  }, {
    "type": "depends-on",
    "display": "Code system RequestIntent",
    "resource": "http://hl7.org/fhir/request-intent"
  }, {
    "type": "depends-on",
    "display": "Code system MedicationRequestCategory",
    "resource": "http://terminology.hl7.org/CodeSystem/medicationrequest-category"
  }, {
    "type": "depends-on",
    "display": "Code system ConditionClinicalStatusCodes",
    "resource": "http://terminology.hl7.org/CodeSystem/condition-clinical"
  }, {
    "type": "depends-on",
    "display": "Code system ConditionVerificationStatusCodes",
    "resource": "http://terminology.hl7.org/CodeSystem/condition-ver-status"
  }, {
    "type": "depends-on",
    "display": "Code system AllergyIntoleranceClinicalStatusCodes",
    "resource": "http://terminology.hl7.org/CodeSystem/allergyintolerance-clinical"
  }, {
    "type": "depends-on",
    "display": "Code system AllergyIntoleranceVerificationStatusCodes",
    "resource": "http://terminology.hl7.org/CodeSystem/allergyintolerance-verification"
  }, {
    "type": "depends-on",
    "display": "Code system ObservationCategoryCodes",
    "resource": "http://terminology.hl7.org/CodeSystem/observation-category"
  }, {
    "type": "depends-on",
    "display": "Code system USCoreObservationCategory",
    "resource": "http://hl7.org/fhir/us/core/CodeSystem/us-core-observation-category"
  }, {
    "type": "depends-on",
    "display": "Code system ObservationStatusCodes",
    "resource": "http://hl7.org/fhir/observation-status"
  }, {
    "type": "depends-on",
    "display": "Code system ConditionCategory",
    "resource": "http://terminology.hl7.org/CodeSystem/condition-category"
  }, {
    "type": "depends-on",
    "display": "Code system USCoreConditionCategory",
    "resource": "http://hl7.org/fhir/us/core/CodeSystem/condition-category"
  }, {
    "type": "depends-on",
    "display": "Code system CDC Race and Ethnicity Codes",
    "resource": "urn:oid:2.16.840.1.113883.6.238"
  }, {
    "type": "depends-on",
    "display": "Code system CommunicationCategoryCodeSystem",
    "resource": "http://terminology.hl7.org/CodeSystem/communication-category"
  }, {
    "type": "depends-on",
    "display": "Code system IdentifierType",
    "resource": "http://terminology.hl7.org/CodeSystem/v2-0203"
  } ],
  "parameter": [ {
    "name": "Patient",
    "use": "out",
    "min": 0,
    "max": "1",
    "type": "Any"
  } ],
  "dataRequirement": [ {
    "type": "Patient",
    "profile": [ "http://hl7.org/fhir/us/core/StructureDefinition/us-core-patient" ]
  } ],
  "content": [ {
    "contentType": "text/cql",
    "data": "LyoKQGF1dGhvcjogQnJ5biBSaG9kZXMKQGRlc2NyaXB0aW9uOiBUaGlzIGxpYnJhcnkgZGVmaW5lcyBmdW5jdGlvbnMgdG8gZXhwb3NlIGV4dGVuc2lvbnMgZGVmaW5lZAppbiBRSUNvcmUgYXMgZmx1ZW50IGZ1bmN0aW9ucyBpbiBDUUwsIGFzIHdlbGwgYXMgY29tbW9uIHRlcm1pbm9sb2d5IGFuZCBmdW5jdGlvbnMKdXNlZCBpbiB3cml0aW5nIENRTCB3aXRoIEZISVIgYW5kIFFJQ29yZSBwcm9maWxlcy4KKi8KbGlicmFyeSBVU0NvcmVDb21tb24gdmVyc2lvbiAnMC4xLjAnCgp1c2luZyBVU0NvcmUgdmVyc2lvbiAnMy4xLjEnCnVzaW5nIEZISVIgdmVyc2lvbiAnNC4wLjEnCgppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMS4wMDAnCgpjb2Rlc3lzdGVtICJMT0lOQyI6ICdodHRwOi8vbG9pbmMub3JnJwpjb2Rlc3lzdGVtICJTTk9NRURDVCI6ICdodHRwOi8vc25vbWVkLmluZm8vc2N0Jwpjb2Rlc3lzdGVtICJDVlgiOiAnaHR0cDovL2hsNy5vcmcvZmhpci9zaWQvY3Z4Jwpjb2Rlc3lzdGVtICJBY3RDb2RlIjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vdjMtQWN0Q29kZScKY29kZXN5c3RlbSAiUm9sZUNvZGUiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS92My1Sb2xlQ29kZScKY29kZXN5c3RlbSAiRGlhZ25vc2lzIFJvbGUiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9kaWFnbm9zaXMtcm9sZScKY29kZXN5c3RlbSAiUmVxdWVzdEludGVudCI6ICdodHRwOi8vaGw3Lm9yZy9maGlyL3JlcXVlc3QtaW50ZW50Jwpjb2Rlc3lzdGVtICJNZWRpY2F0aW9uUmVxdWVzdENhdGVnb3J5IjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vbWVkaWNhdGlvbnJlcXVlc3QtY2F0ZWdvcnknCmNvZGVzeXN0ZW0gIkNvbmRpdGlvbkNsaW5pY2FsU3RhdHVzQ29kZXMiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9jb25kaXRpb24tY2xpbmljYWwnCmNvZGVzeXN0ZW0gIkNvbmRpdGlvblZlcmlmaWNhdGlvblN0YXR1c0NvZGVzIjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vY29uZGl0aW9uLXZlci1zdGF0dXMnCmNvZGVzeXN0ZW0gIkFsbGVyZ3lJbnRvbGVyYW5jZUNsaW5pY2FsU3RhdHVzQ29kZXMiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9hbGxlcmd5aW50b2xlcmFuY2UtY2xpbmljYWwnCmNvZGVzeXN0ZW0gIkFsbGVyZ3lJbnRvbGVyYW5jZVZlcmlmaWNhdGlvblN0YXR1c0NvZGVzIjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vYWxsZXJneWludG9sZXJhbmNlLXZlcmlmaWNhdGlvbicKY29kZXN5c3RlbSAiT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzIjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vb2JzZXJ2YXRpb24tY2F0ZWdvcnknCmNvZGVzeXN0ZW0gIlVTQ29yZU9ic2VydmF0aW9uQ2F0ZWdvcnkiOiAnaHR0cDovL2hsNy5vcmcvZmhpci91cy9jb3JlL0NvZGVTeXN0ZW0vdXMtY29yZS1vYnNlcnZhdGlvbi1jYXRlZ29yeScKY29kZXN5c3RlbSAiT2JzZXJ2YXRpb25TdGF0dXNDb2RlcyI6ICdodHRwOi8vaGw3Lm9yZy9maGlyL29ic2VydmF0aW9uLXN0YXR1cycKY29kZXN5c3RlbSAiQ29uZGl0aW9uQ2F0ZWdvcnkiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9jb25kaXRpb24tY2F0ZWdvcnknCmNvZGVzeXN0ZW0gIlVTQ29yZUNvbmRpdGlvbkNhdGVnb3J5IjogJ2h0dHA6Ly9obDcub3JnL2ZoaXIvdXMvY29yZS9Db2RlU3lzdGVtL2NvbmRpdGlvbi1jYXRlZ29yeScKY29kZXN5c3RlbSAiQ0RDIFJhY2UgYW5kIEV0aG5pY2l0eSBDb2RlcyI6ICd1cm46b2lkOjIuMTYuODQwLjEuMTEzODgzLjYuMjM4Jwpjb2Rlc3lzdGVtICJDb21tdW5pY2F0aW9uQ2F0ZWdvcnlDb2RlU3lzdGVtIjogJ2h0dHA6Ly90ZXJtaW5vbG9neS5obDcub3JnL0NvZGVTeXN0ZW0vY29tbXVuaWNhdGlvbi1jYXRlZ29yeScKY29kZXN5c3RlbSAiSWRlbnRpZmllclR5cGUiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS92Mi0wMjAzJwoKY29kZSAiTWVkaWNhbFJlY29yZE51bWJlciI6ICdNUicgZnJvbSAiSWRlbnRpZmllclR5cGUiIGRpc3BsYXkgJ01lZGljYWwgcmVjb3JkIG51bWJlcicKCmNvZGUgIkJpcnRoZGF0ZSI6ICcyMTExMi04JyBmcm9tICJMT0lOQyIgZGlzcGxheSAnQmlydGggZGF0ZScKY29kZSAiRGVhZCI6ICc0MTkwOTkwMDknIGZyb20gIlNOT01FRENUIiBkaXNwbGF5ICdEZWFkJwpjb2RlICJFUiI6ICdFUicgZnJvbSAiUm9sZUNvZGUiIGRpc3BsYXkgJ0VtZXJnZW5jeSByb29tJwpjb2RlICJJQ1UiOiAnSUNVJyBmcm9tICJSb2xlQ29kZSIgZGlzcGxheSAnSW50ZW5zaXZlIGNhcmUgdW5pdCcKY29kZSAiQmlsbGluZyI6ICdiaWxsaW5nJyBmcm9tICJEaWFnbm9zaXMgUm9sZSIgZGlzcGxheSAnQmlsbGluZycKCi8vIEVuY291bnRlciBDbGFzcyBDb2Rlcwpjb2RlICJhbWJ1bGF0b3J5IjogJ0FNQicgZnJvbSBBY3RDb2RlIGRpc3BsYXkgJ2FtYnVsYXRvcnknCmNvZGUgImVtZXJnZW5jeSI6ICdFTUVSJyBmcm9tIEFjdENvZGUgZGlzcGxheSAnZW1lcmdlbmN5Jwpjb2RlICJmaWVsZCI6ICdGTEQnIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdmaWVsZCcKY29kZSAiaG9tZSBoZWFsdGgiOiAnSEgnIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdob21lIGhlYWx0aCcKY29kZSAiaW5wYXRpZW50IGVuY291bnRlciI6ICdJTVAnIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdpbnBhdGllbnQgZW5jb3VudGVyJwpjb2RlICJpbnBhdGllbnQgYWN1dGUiOiAnQUNVVEUnIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdpbnBhdGllbnQgYWN1dGUnCmNvZGUgImlucGF0aWVudCBub24tYWN1dGUiOiAnTk9OQUMnIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdpbnBhdGllbnQgbm9uLWFjdXRlJwpjb2RlICJvYnNlcnZhdGlvbiBlbmNvdW50ZXIiOiAnT0JTRU5DJyBmcm9tIEFjdENvZGUgZGlzcGxheSAnb2JzZXJ2YXRpb24gZW5jb3VudGVyJwpjb2RlICJwcmUtYWRtaXNzaW9uIjogJ1BSRU5DJyBmcm9tIEFjdENvZGUgZGlzcGxheSAncHJlLWFkbWlzc2lvbicKY29kZSAic2hvcnQgc3RheSI6ICdTUycgZnJvbSBBY3RDb2RlIGRpc3BsYXkgJ3Nob3J0IHN0YXknCmNvZGUgInZpcnR1YWwiOiAnVlInIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdWUicKCi8vIENvbmRpdGlvbiBDYXRlZ29yeSBDb2Rlcwpjb2RlICJwcm9ibGVtLWxpc3QtaXRlbSI6ICdwcm9ibGVtLWxpc3QtaXRlbScgZnJvbSAiQ29uZGl0aW9uQ2F0ZWdvcnkiIGRpc3BsYXkgJ1Byb2JsZW0gTGlzdCBJdGVtJwpjb2RlICJlbmNvdW50ZXItZGlhZ25vc2lzIjogJ2VuY291bnRlci1kaWFnbm9zaXMnIGZyb20gIkNvbmRpdGlvbkNhdGVnb3J5IiBkaXNwbGF5ICdFbmNvdW50ZXIgRGlhZ25vc2lzJwpjb2RlICJoZWFsdGgtY29uY2VybiI6ICdoZWFsdGgtY29uY2VybicgZnJvbSAiVVNDb3JlQ29uZGl0aW9uQ2F0ZWdvcnkiIGRpc3BsYXkgJ0hlYWx0aCBDb25jZXJuJwoKLy8gQ29uZGl0aW9uIENsaW5pY2FsIFN0YXR1cyBDb2RlcyAtIENvbnNpZGVyIHZhbHVlIHNldHMgZm9yIHRoZXNlCmNvZGUgImFjdGl2ZSI6ICdhY3RpdmUnIGZyb20gIkNvbmRpdGlvbkNsaW5pY2FsU3RhdHVzQ29kZXMiCmNvZGUgInJlY3VycmVuY2UiOiAncmVjdXJyZW5jZScgZnJvbSAiQ29uZGl0aW9uQ2xpbmljYWxTdGF0dXNDb2RlcyIKY29kZSAicmVsYXBzZSI6ICdyZWxhcHNlJyBmcm9tICJDb25kaXRpb25DbGluaWNhbFN0YXR1c0NvZGVzIgpjb2RlICJpbmFjdGl2ZSI6ICdpbmFjdGl2ZScgZnJvbSAiQ29uZGl0aW9uQ2xpbmljYWxTdGF0dXNDb2RlcyIKY29kZSAicmVtaXNzaW9uIjogJ3JlbWlzc2lvbicgZnJvbSAiQ29uZGl0aW9uQ2xpbmljYWxTdGF0dXNDb2RlcyIKY29kZSAicmVzb2x2ZWQiOiAncmVzb2x2ZWQnIGZyb20gIkNvbmRpdGlvbkNsaW5pY2FsU3RhdHVzQ29kZXMiCgovLyBDb25kaXRpb24gVmVyaWZpY2F0aW9uIFN0YXR1cyBDb2RlcyAtIENvbnNpZGVyIHZhbHVlIHNldHMgZm9yIHRoZXNlCmNvZGUgInVuY29uZmlybWVkIjogJ3VuY29uZmlybWVkJyBmcm9tIENvbmRpdGlvblZlcmlmaWNhdGlvblN0YXR1c0NvZGVzCmNvZGUgInByb3Zpc2lvbmFsIjogJ3Byb3Zpc2lvbmFsJyBmcm9tIENvbmRpdGlvblZlcmlmaWNhdGlvblN0YXR1c0NvZGVzCmNvZGUgImRpZmZlcmVudGlhbCI6ICdkaWZmZXJlbnRpYWwnIGZyb20gQ29uZGl0aW9uVmVyaWZpY2F0aW9uU3RhdHVzQ29kZXMKY29kZSAiY29uZmlybWVkIjogJ2NvbmZpcm1lZCcgZnJvbSBDb25kaXRpb25WZXJpZmljYXRpb25TdGF0dXNDb2Rlcwpjb2RlICJyZWZ1dGVkIjogJ3JlZnV0ZWQnIGZyb20gQ29uZGl0aW9uVmVyaWZpY2F0aW9uU3RhdHVzQ29kZXMKY29kZSAiZW50ZXJlZC1pbi1lcnJvciI6ICdlbnRlcmVkLWluLWVycm9yJyBmcm9tIENvbmRpdGlvblZlcmlmaWNhdGlvblN0YXR1c0NvZGVzCgpjb2RlICJhbGxlcmd5LWFjdGl2ZSI6ICdhY3RpdmUnIGZyb20gIkFsbGVyZ3lJbnRvbGVyYW5jZUNsaW5pY2FsU3RhdHVzQ29kZXMiCmNvZGUgImFsbGVyZ3ktaW5hY3RpdmUiOiAnaW5hY3RpdmUnIGZyb20gIkFsbGVyZ3lJbnRvbGVyYW5jZUNsaW5pY2FsU3RhdHVzQ29kZXMiCmNvZGUgImFsbGVyZ3ktcmVzb2x2ZWQiOiAncmVzb2x2ZWQnIGZyb20gIkFsbGVyZ3lJbnRvbGVyYW5jZUNsaW5pY2FsU3RhdHVzQ29kZXMiCgovLyBBbGxlcmd5L0ludG9sZXJhbmNlIFZlcmlmaWNhdGlvbiBTdGF0dXMgQ29kZXMgLSBDb25zaWRlciB2YWx1ZSBzZXRzIGZvciB0aGVzZQpjb2RlICJhbGxlcmd5LXVuY29uZmlybWVkIjogJ3VuY29uZmlybWVkJyBmcm9tIEFsbGVyZ3lJbnRvbGVyYW5jZVZlcmlmaWNhdGlvblN0YXR1c0NvZGVzCmNvZGUgImFsbGVyZ3ktY29uZmlybWVkIjogJ2NvbmZpcm1lZCcgZnJvbSBBbGxlcmd5SW50b2xlcmFuY2VWZXJpZmljYXRpb25TdGF0dXNDb2Rlcwpjb2RlICJhbGxlcmd5LXJlZnV0ZWQiOiAncmVmdXRlZCcgZnJvbSBBbGxlcmd5SW50b2xlcmFuY2VWZXJpZmljYXRpb25TdGF0dXNDb2RlcwoKLy8gTWVkaWNhdGlvblJlcXVlc3QgQ2F0ZWdvcnkgQ29kZXMKY29kZSAiSW5wYXRpZW50IjogJ2lucGF0aWVudCcgZnJvbSAiTWVkaWNhdGlvblJlcXVlc3RDYXRlZ29yeSIgZGlzcGxheSAnSW5wYXRpZW50Jwpjb2RlICJPdXRwYXRpZW50IjogJ291dHBhdGllbnQnIGZyb20gIk1lZGljYXRpb25SZXF1ZXN0Q2F0ZWdvcnkiIGRpc3BsYXkgJ091dHBhdGllbnQnCmNvZGUgIkNvbW11bml0eSI6ICdjb21tdW5pdHknIGZyb20gIk1lZGljYXRpb25SZXF1ZXN0Q2F0ZWdvcnkiIGRpc3BsYXkgJ0NvbW11bml0eScKY29kZSAiRGlzY2hhcmdlIjogJ2Rpc2NoYXJnZScgZnJvbSAiTWVkaWNhdGlvblJlcXVlc3RDYXRlZ29yeSIgZGlzcGxheSAnRGlzY2hhcmdlJwoKLy8gRGlhZ25vc2lzIFJvbGUgQ29kZXMKY29kZSAiQUQiOiAnQUQnIGZyb20gIkRpYWdub3NpcyBSb2xlIiBkaXNwbGF5ICdBZG1pc3Npb24gZGlhZ25vc2lzJwpjb2RlICJERCI6ICdERCcgZnJvbSAiRGlhZ25vc2lzIFJvbGUiIGRpc3BsYXkgJ0Rpc2NoYXJnZSBkaWFnbm9zaXMnCmNvZGUgIkNDIjogJ0NDJyBmcm9tICJEaWFnbm9zaXMgUm9sZSIgZGlzcGxheSAnQ2hpZWYgY29tcGxhaW50Jwpjb2RlICJDTSI6ICdDTScgZnJvbSAiRGlhZ25vc2lzIFJvbGUiIGRpc3BsYXkgJ0NvbW9yYmlkaXR5IGRpYWdub3NpcycKY29kZSAicHJlLW9wIjogJ3ByZS1vcCcgZnJvbSAiRGlhZ25vc2lzIFJvbGUiIGRpc3BsYXkgJ3ByZS1vcCBkaWFnbm9zaXMnCmNvZGUgInBvc3Qtb3AiOiAncG9zdC1vcCcgZnJvbSAiRGlhZ25vc2lzIFJvbGUiIGRpc3BsYXkgJ3Bvc3Qtb3AgZGlhZ25vc2lzJwpjb2RlICJiaWxsaW5nIjogJ2JpbGxpbmcnIGZyb20gIkRpYWdub3NpcyBSb2xlIiBkaXNwbGF5ICdiaWxsaW5nIGRpYWdub3NpcycKCi8vIE9ic2VydmF0aW9uIENhdGVnb3J5IENvZGVzCmNvZGUgInNvY2lhbC1oaXN0b3J5IjogJ3NvY2lhbC1oaXN0b3J5JyBmcm9tICJPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMiIGRpc3BsYXkgJ1NvY2lhbCBIaXN0b3J5Jwpjb2RlICJ2aXRhbC1zaWducyI6ICd2aXRhbC1zaWducycgZnJvbSAiT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzIiBkaXNwbGF5ICdWaXRhbCBTaWducycKY29kZSAiaW1hZ2luZyI6ICdpbWFnaW5nJyBmcm9tICJPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMiIGRpc3BsYXkgJ0ltYWdpbmcnCmNvZGUgImxhYm9yYXRvcnkiOiAnbGFib3JhdG9yeScgZnJvbSAiT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzIiBkaXNwbGF5ICdMYWJvcmF0b3J5Jwpjb2RlICJwcm9jZWR1cmUiOiAncHJvY2VkdXJlJyBmcm9tICJPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMiIGRpc3BsYXkgJ1Byb2NlZHVyZScKY29kZSAic3VydmV5IjogJ3N1cnZleScgZnJvbSAiT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzIiBkaXNwbGF5ICdTdXJ2ZXknCmNvZGUgImV4YW0iOiAnZXhhbScgZnJvbSAiT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzIiBkaXNwbGF5ICdFeGFtJwpjb2RlICJ0aGVyYXB5IjogJ3RoZXJhcHknIGZyb20gIk9ic2VydmF0aW9uQ2F0ZWdvcnlDb2RlcyIgZGlzcGxheSAnVGhlcmFweScKY29kZSAiYWN0aXZpdHkiOiAnYWN0aXZpdHknIGZyb20gIk9ic2VydmF0aW9uQ2F0ZWdvcnlDb2RlcyIgZGlzcGxheSAnQWN0aXZpdHknCmNvZGUgImNsaW5pY2FsLXRlc3QiOiAnY2xpbmljYWwtdGVzdCcgZnJvbSAiVVNDb3JlT2JzZXJ2YXRpb25DYXRlZ29yeSIgZGlzcGxheSAnQ2xpbmljYWwgVGVzdCcKCi8vIE9ic2VydmF0aW9uIFN0YXR1cyBDb2Rlcwpjb2RlICJvYnNlcnZhdGlvbi1yZWdpc3RlcmVkIjogJ3JlZ2lzdGVyZWQnIGZyb20gIk9ic2VydmF0aW9uU3RhdHVzQ29kZXMiIGRpc3BsYXkgJ1JlZ2lzdGVyZWQnCmNvZGUgIm9ic2VydmF0aW9uLXByZWxpbWluYXJ5IjogJ3ByZWxpbWluYXJ5JyBmcm9tICJPYnNlcnZhdGlvblN0YXR1c0NvZGVzIiBkaXNwbGF5ICdQcmVsaW1pbmFyeScKY29kZSAib2JzZXJ2YXRpb24tZmluYWwiOiAnZmluYWwnIGZyb20gIk9ic2VydmF0aW9uU3RhdHVzQ29kZXMiIGRpc3BsYXkgJ0ZpbmFsJwpjb2RlICJvYnNlcnZhdGlvbi1hbWVuZGVkIjogJ2FtZW5kZWQnIGZyb20gIk9ic2VydmF0aW9uU3RhdHVzQ29kZXMiIGRpc3BsYXkgJ0FtZW5kZWQnCmNvZGUgIm9ic2VydmF0aW9uLWNvcnJlY3RlZCI6ICdjb3JyZWN0ZWQnIGZyb20gIk9ic2VydmF0aW9uU3RhdHVzQ29kZXMiIGRpc3BsYXkgJ0NvcnJlY3RlZCcKY29kZSAib2JzZXJ2YXRpb24tY2FuY2VsbGVkIjogJ2NhbmNlbGxlZCcgZnJvbSAiT2JzZXJ2YXRpb25TdGF0dXNDb2RlcyIgZGlzcGxheSAnQ2FuY2VsbGVkJwpjb2RlICJvYnNlcnZhdGlvbi1lbnRlcmVkLWluLWVycm9yIjogJ2VudGVyZWQtaW4tZXJyb3InIGZyb20gIk9ic2VydmF0aW9uU3RhdHVzQ29kZXMiIGRpc3BsYXkgJ0VudGVyZWQgaW4gRXJyb3InCmNvZGUgIm9ic2VydmF0aW9uLXVua25vd24iOiAndW5rbm93bicgZnJvbSAiT2JzZXJ2YXRpb25TdGF0dXNDb2RlcyIgZGlzcGxheSAnVW5rbm93bicKCmNvbnRleHQgUGF0aWVudAoKLyogQ2FuZGlkYXRlcyBmb3IgRkhJUkNvbW1vbiAqLwoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGNvbmRpdGlvbiBoYXMgYSBjbGluaWNhbCBzdGF0dXMgb2YgYWN0aXZlLCByZWN1cnJlbmNlLCBvciByZWxhcHNlCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNBY3RpdmUoY29uZGl0aW9uIFVTQ29yZS5Db25kaXRpb24pOgogIGNvbmRpdGlvbi5jbGluaWNhbFN0YXR1cyB+ICJhY3RpdmUiCiAgICBvciBjb25kaXRpb24uY2xpbmljYWxTdGF0dXMgfiAicmVjdXJyZW5jZSIKICAgIG9yIGNvbmRpdGlvbi5jbGluaWNhbFN0YXR1cyB+ICJyZWxhcHNlIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBhY3RpdmUoY29uZGl0aW9ucyBMaXN0PFVTQ29yZS5Db25kaXRpb24+KToKICBjb25kaXRpb25zIEMKICAgIHdoZXJlIEMuY2xpbmljYWxTdGF0dXMgfiAiYWN0aXZlIgogICAgICBvciBDLmNsaW5pY2FsU3RhdHVzIH4gInJlY3VycmVuY2UiCiAgICAgIG9yIEMuY2xpbmljYWxTdGF0dXMgfiAicmVsYXBzZSIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNBbGxlcmd5QWN0aXZlKGFsbGVyZ3lJbnRvbGVyYW5jZSBVU0NvcmUuQWxsZXJneUludG9sZXJhbmNlKToKICBhbGxlcmd5SW50b2xlcmFuY2UuY2xpbmljYWxTdGF0dXMgfiAiYWxsZXJneS1hY3RpdmUiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGFsbGVyZ3lBY3RpdmUoYWxsZXJneUludG9sZXJhbmNlcyBMaXN0PFVTQ29yZS5BbGxlcmd5SW50b2xlcmFuY2U+KToKICBhbGxlcmd5SW50b2xlcmFuY2VzIEEKICAgIHdoZXJlIEEuY2xpbmljYWxTdGF0dXMgfiAiYWxsZXJneS1hY3RpdmUiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzQWxsZXJneUluYWN0aXZlKGFsbGVyZ3lJbnRvbGVyYW5jZSBVU0NvcmUuQWxsZXJneUludG9sZXJhbmNlKToKICBhbGxlcmd5SW50b2xlcmFuY2UuY2xpbmljYWxTdGF0dXMgfiAiYWxsZXJneS1pbmFjdGl2ZSIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYWxsZXJneUluYWN0aXZlKGFsbGVyZ3lJbnRvbGVyYW5jZXMgTGlzdDxVU0NvcmUuQWxsZXJneUludG9sZXJhbmNlPik6CiAgYWxsZXJneUludG9sZXJhbmNlcyBBCiAgICB3aGVyZSBBLmNsaW5pY2FsU3RhdHVzIH4gImFsbGVyZ3ktaW5hY3RpdmUiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzQWxsZXJneVJlc29sdmVkKGFsbGVyZ3lJbnRvbGVyYW5jZSBVU0NvcmUuQWxsZXJneUludG9sZXJhbmNlKToKICBhbGxlcmd5SW50b2xlcmFuY2UuY2xpbmljYWxTdGF0dXMgfiAiYWxsZXJneS1yZXNvbHZlZCIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYWxsZXJneVJlc29sdmVkKGFsbGVyZ3lJbnRvbGVyYW5jZXMgTGlzdDxVU0NvcmUuQWxsZXJneUludG9sZXJhbmNlPik6CiAgYWxsZXJneUludG9sZXJhbmNlcyBBCiAgICB3aGVyZSBBLmNsaW5pY2FsU3RhdHVzIH4gImFsbGVyZ3ktcmVzb2x2ZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzQWxsZXJneUNvbmZpcm1lZChhbGxlcmd5SW50b2xlcmFuY2UgVVNDb3JlLkFsbGVyZ3lJbnRvbGVyYW5jZSk6CiAgYWxsZXJneUludG9sZXJhbmNlLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJhbGxlcmd5LWNvbmZpcm1lZCIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYWxsZXJneUNvbmZpcm1lZChhbGxlcmd5SW50b2xlcmFuY2VzIExpc3Q8VVNDb3JlLkFsbGVyZ3lJbnRvbGVyYW5jZT4pOgogIGFsbGVyZ3lJbnRvbGVyYW5jZXMgQQogICAgd2hlcmUgQS52ZXJpZmljYXRpb25TdGF0dXMgfiAiYWxsZXJneS1jb25maXJtZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzQWxsZXJneVVuY29uZmlybWVkKGFsbGVyZ3lJbnRvbGVyYW5jZSBVU0NvcmUuQWxsZXJneUludG9sZXJhbmNlKToKICBhbGxlcmd5SW50b2xlcmFuY2UudmVyaWZpY2F0aW9uU3RhdHVzIH4gImFsbGVyZ3ktdW5jb25maXJtZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGFsbGVyZ3lVbmNvbmZpcm1lZChhbGxlcmd5SW50b2xlcmFuY2VzIFVTQ29yZS5BbGxlcmd5SW50b2xlcmFuY2UpOgogIGFsbGVyZ3lJbnRvbGVyYW5jZXMgQQogICAgd2hlcmUgQS52ZXJpZmljYXRpb25TdGF0dXMgfiAiYWxsZXJneS11bmNvbmZpcm1lZCIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNBbGxlcmd5UmVmdXRlZChhbGxlcmd5SW50b2xlcmFuY2UgVVNDb3JlLkFsbGVyZ3lJbnRvbGVyYW5jZSk6CiAgYWxsZXJneUludG9sZXJhbmNlLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJhbGxlcmd5LXJlZnV0ZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGFsbGVyZ3lSZWZ1dGVkKGFsbGVyZ3lJbnRvbGVyYW5jZXMgVVNDb3JlLkFsbGVyZ3lJbnRvbGVyYW5jZSk6CiAgYWxsZXJneUludG9sZXJhbmNlcyBBCiAgICB3aGVyZSBBLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJhbGxlcmd5LXJlZnV0ZWQiCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gY29uZGl0aW9uIGhhcyB0aGUgZ2l2ZW4gY2F0ZWdvcnkKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNDYXRlZ29yeShjb25kaXRpb24gVVNDb3JlLkNvbmRpdGlvbiwgY2F0ZWdvcnkgQ29kZSk6CiAgZXhpc3RzIChjb25kaXRpb24uY2F0ZWdvcnkgQwogICAgd2hlcmUgQyB+IGNhdGVnb3J5CiAgKQoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGNvbmRpdGlvbiBpcyBhIHByb2JsZW0gbGlzdCBpdGVtLgoqLwpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzUHJvYmxlbUxpc3RJdGVtKGNvbmRpdGlvbiBVU0NvcmUuQ29uZGl0aW9uKToKICBleGlzdHMgKGNvbmRpdGlvbi5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gInByb2JsZW0tbGlzdC1pdGVtIgogICkKCi8qCkBkZXNjcmlwdGlvbjogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBjb25kaXRpb24gaXMgYW4gZW5jb3VudGVyIGRpYWdub3NpcwoqLwpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzRW5jb3VudGVyRGlhZ25vc2lzKGNvbmRpdGlvbiBVU0NvcmUuQ29uZGl0aW9uKToKICBleGlzdHMgKGNvbmRpdGlvbi5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gImVuY291bnRlci1kaWFnbm9zaXMiCiAgKQoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGNvbmRpdGlvbiBpcyBhIGhlYWx0aCBjb25jZXJuCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNIZWFsdGhDb25jZXJuKGNvbmRpdGlvbiBVU0NvcmUuQ29uZGl0aW9uKToKICBleGlzdHMgKGNvbmRpdGlvbi5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gImhlYWx0aC1jb25jZXJuIgogICkKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNVbmNvbmZpcm1lZChjb25kaXRpb24gVVNDb3JlLkNvbmRpdGlvbik6CiAgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJ1bmNvbmZpcm1lZCIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gdW5jb25maXJtZWQoY29uZGl0aW9ucyBMaXN0PFVTQ29yZS5Db25kaXRpb24+KToKICBjb25kaXRpb25zIEMKICAgIHdoZXJlIEMudmVyaWZpY2F0aW9uU3RhdHVzIH4gInVuY29uZmlybWVkIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc1Byb3Zpc2lvbmFsKGNvbmRpdGlvbiBVU0NvcmUuQ29uZGl0aW9uKToKICBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gInByb3Zpc2lvbmFsIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBwcm92aXNpb25hbChjb25kaXRpb25zIExpc3Q8VVNDb3JlLkNvbmRpdGlvbj4pOgogIGNvbmRpdGlvbnMgQwogICAgd2hlcmUgQy52ZXJpZmljYXRpb25TdGF0dXMgfiAicHJvdmlzaW9uYWwiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzRGlmZmVyZW50aWFsKGNvbmRpdGlvbiBVU0NvcmUuQ29uZGl0aW9uKToKICBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gImRpZmZlcmVudGlhbCIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gZGlmZmVyZW50aWFsKGNvbmRpdGlvbnMgTGlzdDxVU0NvcmUuQ29uZGl0aW9uPik6CiAgY29uZGl0aW9ucyBDCiAgICB3aGVyZSBDLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJkaWZmZXJlbnRpYWwiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzQ29uZmlybWVkKGNvbmRpdGlvbiBVU0NvcmUuQ29uZGl0aW9uKToKICBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gImNvbmZpcm1lZCIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gY29uZmlybWVkKGNvbmRpdGlvbnMgTGlzdDxVU0NvcmUuQ29uZGl0aW9uPik6CiAgY29uZGl0aW9ucyBDCiAgICB3aGVyZSBDLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJjb25maXJtZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzUmVmdXRlZChjb25kaXRpb24gVVNDb3JlLkNvbmRpdGlvbik6CiAgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJyZWZ1dGVkIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiByZWZ1dGVkKGNvbmRpdGlvbnMgTGlzdDxVU0NvcmUuQ29uZGl0aW9uPik6CiAgY29uZGl0aW9ucyBDCiAgICB3aGVyZSBDLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJyZWZ1dGVkIgoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG9ic2VydmF0aW9uIGhhcyB0aGUgZ2l2ZW4gY2F0ZWdvcnkKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNDYXRlZ29yeShvYnNlcnZhdGlvbiBMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb25Qcm9maWxlLCBjYXRlZ29yeSBDb2RlKToKICBleGlzdHMgKG9ic2VydmF0aW9uLmNhdGVnb3J5IEMKICAgIHdoZXJlIEMgfiBjYXRlZ29yeQogICkKCi8qCkBkZXNjcmlwdGlvbjogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBvYnNlcnZhdGlvbiBoYXMgc3RhdHVzCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNSZXN1bHRlZChvYnNlcnZhdGlvbiBMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb25Qcm9maWxlKToKICBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tZmluYWwiLmNvZGUKICAgIG9yIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1hbWVuZGVkIi5jb2RlCiAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tY29ycmVjdGVkIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIHJlc3VsdGVkKG9ic2VydmF0aW9ucyBMaXN0PExhYm9yYXRvcnlSZXN1bHRPYnNlcnZhdGlvblByb2ZpbGU+KToKICBvYnNlcnZhdGlvbnMgb2JzZXJ2YXRpb24KICAgIHdoZXJlIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1maW5hbCIuY29kZQogICAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQogICAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tY29ycmVjdGVkIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzRmluYWwob2JzZXJ2YXRpb24gTGFib3JhdG9yeVJlc3VsdE9ic2VydmF0aW9uUHJvZmlsZSk6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWZpbmFsIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGZpbmFsKG9ic2VydmF0aW9ucyBMaXN0PExhYm9yYXRvcnlSZXN1bHRPYnNlcnZhdGlvblByb2ZpbGU+KToKICBvYnNlcnZhdGlvbnMgb2JzZXJ2YXRpb24KICAgIHdoZXJlIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1maW5hbCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0FtZW5kZWQob2JzZXJ2YXRpb24gTGFib3JhdG9yeVJlc3VsdE9ic2VydmF0aW9uUHJvZmlsZSk6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWFtZW5kZWQiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYW1lbmRlZChvYnNlcnZhdGlvbnMgTGlzdDxMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb25Qcm9maWxlPik6CiAgb2JzZXJ2YXRpb25zIG9ic2VydmF0aW9uCiAgICB3aGVyZSBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0NvcnJlY3RlZChvYnNlcnZhdGlvbiBMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb25Qcm9maWxlKToKICBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tY29ycmVjdGVkIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGNvcnJlY3RlZChvYnNlcnZhdGlvbnMgTGlzdDxMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb25Qcm9maWxlPik6CiAgb2JzZXJ2YXRpb25zIG9ic2VydmF0aW9uCiAgICB3aGVyZSBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tY29ycmVjdGVkIi5jb2RlCgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc1Jlc3VsdGVkKG9ic2VydmF0aW9uICJvYnNlcnZhdGlvbi1ib2R5d2VpZ2h0Iik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWZpbmFsIi5jb2RlCiAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQogICAgb3Igb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWNvcnJlY3RlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiByZXN1bHRlZChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tYm9keXdlaWdodCI+KToKICBvYnNlcnZhdGlvbnMgb2JzZXJ2YXRpb24KICAgIHdoZXJlIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1maW5hbCIuY29kZQogICAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQogICAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tY29ycmVjdGVkIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzRmluYWwob2JzZXJ2YXRpb24gIm9ic2VydmF0aW9uLWJvZHl3ZWlnaHQiKToKICBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tZmluYWwiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gZmluYWwob2JzZXJ2YXRpb25zIExpc3Q8Im9ic2VydmF0aW9uLWJvZHl3ZWlnaHQiPik6CiAgb2JzZXJ2YXRpb25zIG9ic2VydmF0aW9uCiAgICB3aGVyZSBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tZmluYWwiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNBbWVuZGVkKG9ic2VydmF0aW9uICJvYnNlcnZhdGlvbi1ib2R5d2VpZ2h0Iik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWFtZW5kZWQiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYW1lbmRlZChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tYm9keXdlaWdodCI+KToKICBvYnNlcnZhdGlvbnMgb2JzZXJ2YXRpb24KICAgIHdoZXJlIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1hbWVuZGVkIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzQ29ycmVjdGVkKG9ic2VydmF0aW9uICJvYnNlcnZhdGlvbi1ib2R5d2VpZ2h0Iik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWNvcnJlY3RlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBjb3JyZWN0ZWQob2JzZXJ2YXRpb25zIExpc3Q8Im9ic2VydmF0aW9uLWJvZHl3ZWlnaHQiPik6CiAgb2JzZXJ2YXRpb25zIG9ic2VydmF0aW9uCiAgICB3aGVyZSBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tY29ycmVjdGVkIi5jb2RlCgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc1Jlc3VsdGVkKG9ic2VydmF0aW9uICJvYnNlcnZhdGlvbi1ib2R5aGVpZ2h0Iik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWZpbmFsIi5jb2RlCiAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQogICAgb3Igb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWNvcnJlY3RlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiByZXN1bHRlZChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tYm9keWhlaWdodCI+KToKICBvYnNlcnZhdGlvbnMgb2JzZXJ2YXRpb24KICAgIHdoZXJlIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1maW5hbCIuY29kZQogICAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQogICAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tY29ycmVjdGVkIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzRmluYWwob2JzZXJ2YXRpb24gIm9ic2VydmF0aW9uLWJvZHloZWlnaHQiKToKICBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tZmluYWwiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gZmluYWwob2JzZXJ2YXRpb25zIExpc3Q8Im9ic2VydmF0aW9uLWJvZHloZWlnaHQiPik6CiAgb2JzZXJ2YXRpb25zIG9ic2VydmF0aW9uCiAgICB3aGVyZSBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tZmluYWwiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNBbWVuZGVkKG9ic2VydmF0aW9uICJvYnNlcnZhdGlvbi1ib2R5aGVpZ2h0Iik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWFtZW5kZWQiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYW1lbmRlZChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tYm9keWhlaWdodCI+KToKICBvYnNlcnZhdGlvbnMgb2JzZXJ2YXRpb24KICAgIHdoZXJlIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1hbWVuZGVkIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzQ29ycmVjdGVkKG9ic2VydmF0aW9uICJvYnNlcnZhdGlvbi1ib2R5aGVpZ2h0Iik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWNvcnJlY3RlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBjb3JyZWN0ZWQob2JzZXJ2YXRpb25zIExpc3Q8Im9ic2VydmF0aW9uLWJvZHloZWlnaHQiPik6CiAgb2JzZXJ2YXRpb25zIG9ic2VydmF0aW9uCiAgICB3aGVyZSBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tY29ycmVjdGVkIi5jb2RlCiAgICByZXR1cm4gb2JzZXJ2YXRpb24uc3RhdHVzCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gTWVkaWNhdGlvblJlcXVlc3QgaGFzIGEgY2F0ZWdvcnkgb2YgQ29tbXVuaXR5CiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNDb21tdW5pdHkobWVkaWNhdGlvblJlcXVlc3QgTWVkaWNhdGlvblJlcXVlc3RQcm9maWxlKToKICBleGlzdHMgKG1lZGljYXRpb25SZXF1ZXN0LmNhdGVnb3J5IEMKICAgIHdoZXJlIEMgfiBDb21tdW5pdHkKICApCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gTWVkaWNhdGlvblJlcXVlc3QgaGFzIGEgY2F0ZWdvcnkgb2YgRGlzY2hhcmdlCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNEaXNjaGFyZ2UobWVkaWNhdGlvblJlcXVlc3QgTWVkaWNhdGlvblJlcXVlc3RQcm9maWxlKToKICBleGlzdHMgKG1lZGljYXRpb25SZXF1ZXN0LmNhdGVnb3J5IEMKICAgIHdoZXJlIEMgfiBEaXNjaGFyZ2UKICApCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gTWVkaWNhdGlvblJlcXVlc3QgaGFzIHRoZSBnaXZlbiBjYXRlZ29yeQoqLwpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGhhc0NhdGVnb3J5KG1lZGljYXRpb25SZXF1ZXN0IE1lZGljYXRpb25SZXF1ZXN0UHJvZmlsZSwgY2F0ZWdvcnkgQ29kZSk6CiAgZXhpc3RzIChtZWRpY2F0aW9uUmVxdWVzdC5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gY2F0ZWdvcnkKICApCgovKgpAZGVzY3JpcHRpb246IE5vcm1hbGl6ZXMgYSB2YWx1ZSB0aGF0IGlzIGEgY2hvaWNlIG9mIHRpbWluZy12YWx1ZWQgdHlwZXMgdG8gYW4gZXF1aXZhbGVudCBpbnRlcnZhbApAY29tbWVudDogTm9ybWFsaXplcyBhIGNob2ljZSB0eXBlIG9mIERhdGVUaW1lLCBRdWFuaXR0eSwgSW50ZXJ2YWw8RGF0ZVRpbWU+LCBvciBJbnRlcnZhbDxRdWFudGl0eT4gdHlwZXMKdG8gYW4gZXF1aXZhbGVudCBpbnRlcnZhbC4gVGhpcyBzZWxlY3Rpb24gb2YgY2hvaWNlIHR5cGVzIGlzIGEgc3VwZXJzZXQgb2YgdGhlIG1ham9yaXR5IG9mIGNob2ljZSB0eXBlcyB0aGF0IGFyZSB1c2VkIGFzIHBvc3NpYmxlCnJlcHJlc2VudGF0aW9ucyBmb3IgdGltaW5nLXZhbHVlZCBlbGVtZW50cyBpbiBRSUNvcmUsIGFsbG93aW5nIHRoaXMgZnVuY3Rpb24gdG8gYmUgdXNlZCBhY3Jvc3MgYW55IHJlc291cmNlLgpUaGUgaW5wdXQgY2FuIGJlIHByb3ZpZGVkIGFzIGEgRGF0ZVRpbWUsIFF1YW50aXR5LCBJbnRlcnZhbDxEYXRlVGltZT4gb3IgSW50ZXJ2YWw8UXVhbnRpdHk+LgpUaGUgaW50ZW50IG9mIHRoaXMgZnVuY3Rpb24gaXMgdG8gcHJvdmlkZSBhIGNsZWFyIGFuZCBjb25jaXNlIG1lY2hhbmlzbSB0byB0cmVhdCBzaW5nbGUKZWxlbWVudHMgdGhhdCBoYXZlIG11bHRpcGxlIHBvc3NpYmxlIHJlcHJlc2VudGF0aW9ucyBhcyBpbnRlcnZhbHMgc28gdGhhdCBsb2dpYyBkb2Vzbid0IGhhdmUgdG8gYWNjb3VudApmb3IgdGhlIHZhcmlhYmlsaXR5LiBNb3JlIGNvbXBsZXggY2FsY3VsYXRpb25zIChzdWNoIGFzIG1lZGljYXRpb24gcmVxdWVzdCBwZXJpb2Qgb3IgZGlzcGVuc2UgcGVyaW9kCmNhbGN1bGF0aW9uKSBuZWVkIHNwZWNpZmljIGd1aWRhbmNlIGFuZCBjb25zaWRlcmF0aW9uLiBUaGF0IGd1aWRhbmNlIG1heSBtYWtlIHVzZSBvZiB0aGlzIGZ1bmN0aW9uLCBidXQKdGhlIGZvY3VzIG9mIHRoaXMgZnVuY3Rpb24gaXMgb24gc2luZ2xlIGVsZW1lbnQgY2FsY3VsYXRpb25zIHdoZXJlIHRoZSBzZW1hbnRpY3MgYXJlIHVuYW1iaWd1b3VzLgpJZiB0aGUgaW5wdXQgaXMgYSBEYXRlVGltZSwgdGhlIHJlc3VsdCBhIERhdGVUaW1lIEludGVydmFsIGJlZ2lubmluZyBhbmQgZW5kaW5nIG9uIHRoYXQgRGF0ZVRpbWUuCklmIHRoZSBpbnB1dCBpcyBhIFF1YW50aXR5LCB0aGUgcXVhbnRpdHkgaXMgZXhwZWN0ZWQgdG8gYmUgYSBjYWxlbmRhci1kdXJhdGlvbiBpbnRlcnByZXRlZCBhcyBhbiBBZ2UsCmFuZCB0aGUgcmVzdWx0IGlzIGEgRGF0ZVRpbWUgSW50ZXJ2YWwgYmVnaW5uaW5nIG9uIHRoZSBEYXRlIHRoZSBwYXRpZW50IHR1cm5lZCB0aGF0IGFnZSBhbmQgZW5kaW5nIGltbWVkaWF0ZWx5IGJlZm9yZSBvbmUgeWVhciBsYXRlci4KSWYgdGhlIGlucHV0IGlzIGEgRGF0ZVRpbWUgSW50ZXJ2YWwsIHRoZSByZXN1bHQgaXMgdGhlIGlucHV0LgpJZiB0aGUgaW5wdXQgaXMgYSBRdWFudGl0eSBJbnRlcnZhbCwgdGhlIHF1YW50aXRpZXMgYXJlIGV4cGVjdGVkIHRvIGJlIGNhbGVuZGFyLWR1cmF0aW9ucyBpbnRlcnByZXRlZCBhcyBhbiBBZ2UsIGFuZCB0aGUgcmVzdWx0CmlzIGEgRGF0ZVRpbWUgSW50ZXJ2YWwgYmVnaW5uaW5nIG9uIHRoZSBkYXRlIHRoZSBwYXRpZW50IHR1cm5lZCB0aGUgYWdlIGdpdmVuIGFzIHRoZSBzdGFydCBvZiB0aGUgcXVhbnRpdHkgaW50ZXJ2YWwsIGFuZCBlbmRpbmcKaW1tZWRpYXRlbHkgYmVmb3JlIG9uZSB5ZWFyIGxhdGVyIHRoYW4gdGhlIGRhdGUgdGhlIHBhdGllbnQgdHVybmVkIHRoZSBhZ2UgZ2l2ZW4gYXMgdGhlIGVuZCBvZiB0aGUgcXVhbnRpdHkgaW50ZXJ2YWwuCkFueSBvdGhlciBpbnB1dCB3aWxsIHJlc2x0IGluIGEgbnVsbCBEYXRlVGltZSBJbnRlcnZhbAoqLwpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIHRvSW50ZXJ2YWwoY2hvaWNlIENob2ljZTxEYXRlVGltZSwgUXVhbnRpdHksIEludGVydmFsPERhdGVUaW1lPiwgSW50ZXJ2YWw8UXVhbnRpdHk+Pik6CiAgY2FzZQoJICB3aGVuIGNob2ljZSBpcyBEYXRlVGltZSB0aGVuCiAgICAJSW50ZXJ2YWxbY2hvaWNlIGFzIERhdGVUaW1lLCBjaG9pY2UgYXMgRGF0ZVRpbWVdCgkJd2hlbiBjaG9pY2UgaXMgSW50ZXJ2YWw8RGF0ZVRpbWU+IHRoZW4KICAJCWNob2ljZSBhcyBJbnRlcnZhbDxEYXRlVGltZT4KCQl3aGVuIGNob2ljZSBpcyBRdWFudGl0eSB0aGVuCgkJICBJbnRlcnZhbFtQYXRpZW50LmJpcnRoRGF0ZSArIChjaG9pY2UgYXMgUXVhbnRpdHkpLAoJCQkgIFBhdGllbnQuYmlydGhEYXRlICsgKGNob2ljZSBhcyBRdWFudGl0eSkgKyAxIHllYXIpCgkJd2hlbiBjaG9pY2UgaXMgSW50ZXJ2YWw8UXVhbnRpdHk+IHRoZW4KCQkgIEludGVydmFsW1BhdGllbnQuYmlydGhEYXRlICsgKGNob2ljZS5sb3cgYXMgUXVhbnRpdHkpLAoJCQkgIFBhdGllbnQuYmlydGhEYXRlICsgKGNob2ljZS5oaWdoIGFzIFF1YW50aXR5KSArIDEgeWVhcikKCQllbHNlCgkJCW51bGwgYXMgSW50ZXJ2YWw8RGF0ZVRpbWU+CgllbmQKCi8qCkBkZXNjcmlwdGlvbjogUmV0dXJucyBhbiBpbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIG5vcm1hbGl6ZWQgYWJhdGVtZW50IG9mIGEgZ2l2ZW4gQ29uZGl0aW9uLgpAY29tbWVudDogSWYgdGhlIGFiYXRlbWVudCBlbGVtZW50IG9mIHRoZSBDb25kaXRpb24gaXMgcmVwcmVzZW50ZWQgYXMgYSBEYXRlVGltZSwgdGhlIHJlc3VsdAppcyBhbiBpbnRlcnZhbCBiZWdpbm5pbmcgYW5kIGVuZGluZyBvbiB0aGF0IERhdGVUaW1lLgpJZiB0aGUgYWJhdGVtZW50IGlzIHJlcHJlc2VudGVkIGFzIGEgUXVhbnRpdHksIHRoZSBxdWFudGl0eSBpcyBleHBlY3RlZCB0byBiZSBhIGNhbGVuZGFyLWR1cmF0aW9uIGFuZCBpcyBpbnRlcnByZXRlZCBhcyB0aGUgYWdlIG9mIHRoZSBwYXRpZW50LiBUaGUKcmVzdWx0IGlzIGFuIGludGVydmFsIGZyb20gdGhlIGRhdGUgdGhlIHBhdGllbnQgdHVybmVkIHRoYXQgYWdlIHRvIGltbWVkaWF0ZWx5IGJlZm9yZSBvbmUgeWVhciBsYXRlci4KSWYgdGhlIGFiYXRlbWVudCBpcyByZXByZXNlbnRlZCBhcyBhIFF1YW50aXR5IEludGVydmFsLCB0aGUgcXVhbnRpdGllcyBhcmUgZXhwZWN0ZWQgdG8gYmUgY2FsZW5kYXItZHVyYXRpb25zIGFuZCBhcmUgaW50ZXJwcmV0ZWQgYXMgYW4gYWdlIHJhbmdlIGR1cmluZwp3aGljaCB0aGUgYWJhdGVtZW50IG9jY3VycmVkLiBUaGUgcmVzdWx0IGlzIGFuIGludGVydmFsIGZyb20gdGhlIGRhdGUgdGhlIHBhdGllbnQgdHVybmVkIHRoZSBzdGFydGluZyBhZ2Ugb2YgdGhlIHF1YW50aXR5IGludGVydmFsLCBhbmQgZW5kaW5nIGltbWVkaWF0ZWx5CmJlZm9yZSBvbmUgeWVhciBsYXRlciB0aGFuIHRoZSBkYXRlIHRoZSBwYXRpZW50IHR1cm5lZCB0aGUgZW5kaW5nIGFnZSBvZiB0aGUgcXVhbnRpdHkgaW50ZXJ2YWwuCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYWJhdGVtZW50SW50ZXJ2YWwoY29uZGl0aW9uIFVTQ29yZS5Db25kaXRpb24pOgoJaWYgY29uZGl0aW9uLmFiYXRlbWVudCBpcyBEYXRlVGltZSB0aGVuCgkgIEludGVydmFsW2NvbmRpdGlvbi5hYmF0ZW1lbnQgYXMgRGF0ZVRpbWUsIGNvbmRpdGlvbi5hYmF0ZW1lbnQgYXMgRGF0ZVRpbWVdCgllbHNlIGlmIGNvbmRpdGlvbi5hYmF0ZW1lbnQgaXMgU3lzdGVtLlF1YW50aXR5IHRoZW4KCQlJbnRlcnZhbFtQYXRpZW50LmJpcnRoRGF0ZSArIChjb25kaXRpb24uYWJhdGVtZW50IGFzIFN5c3RlbS5RdWFudGl0eSksCgkJCVBhdGllbnQuYmlydGhEYXRlICsgKGNvbmRpdGlvbi5hYmF0ZW1lbnQgYXMgU3lzdGVtLlF1YW50aXR5KSArIDEgeWVhcikKCWVsc2UgaWYgY29uZGl0aW9uLmFiYXRlbWVudCBpcyBJbnRlcnZhbDxTeXN0ZW0uUXVhbnRpdHk+IHRoZW4KCSAgSW50ZXJ2YWxbUGF0aWVudC5iaXJ0aERhdGUgKyAoY29uZGl0aW9uLmFiYXRlbWVudC5sb3cgYXMgU3lzdGVtLlF1YW50aXR5KSwKCQkgIFBhdGllbnQuYmlydGhEYXRlICsgKGNvbmRpdGlvbi5hYmF0ZW1lbnQuaGlnaCBhcyBTeXN0ZW0uUXVhbnRpdHkpICsgMSB5ZWFyKQoJZWxzZSBpZiBjb25kaXRpb24uYWJhdGVtZW50IGlzIEludGVydmFsPERhdGVUaW1lPiB0aGVuCgkgIEludGVydmFsW2NvbmRpdGlvbi5hYmF0ZW1lbnQubG93LCBjb25kaXRpb24uYWJhdGVtZW50LmhpZ2gpCgllbHNlIG51bGwgYXMgSW50ZXJ2YWw8RGF0ZVRpbWU+CgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgYW4gaW50ZXJ2YWwgcmVwcmVzZW50aW5nIHRoZSBub3JtYWxpemVkIHByZXZhbGVuY2UgcGVyaW9kIG9mIGEgZ2l2ZW4gQ29uZGl0aW9uLgpAY29tbWVudDogVXNlcyB0aGUgdG9JbnRlcnZhbCBhbmQgYWJhdGVtZW50SW50ZXJ2YWwgZnVuY3Rpb25zIHRvIGRldGVybWluZSB0aGUgd2lkZXN0IHBvdGVudGlhbCBpbnRlcnZhbCBmcm9tCm9uc2V0IHRvIGFiYXRlbWVudCBhcyBzcGVjaWZpZWQgaW4gdGhlIGdpdmVuIENvbmRpdGlvbi4gSWYgdGhlIGNvbmRpdGlvbiBpcyBhY3RpdmUsIHRoZSByZXN1bHRpbmcgaW50ZXJ2YWwgd2lsbCBoYXZlCmEgY2xvc2VkIGVuZGluZyBib3VuZGFyeS4gSWYgdGhlIGNvbmRpdGlvbiBpcyBub3QgYWN0aXZlLCB0aGUgcmVzdWx0aW5nIGludGVydmFsIHdpbGwgaGF2ZSBhbiBvcGVuIGVuZGluZyBib3VuZGFyeS4KKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBwcmV2YWxlbmNlSW50ZXJ2YWwoY29uZGl0aW9uIFVTQ29yZS5Db25kaXRpb24pOgppZiBjb25kaXRpb24uY2xpbmljYWxTdGF0dXMgfiAiYWN0aXZlIgogIG9yIGNvbmRpdGlvbi5jbGluaWNhbFN0YXR1cyB+ICJyZWN1cnJlbmNlIgogIG9yIGNvbmRpdGlvbi5jbGluaWNhbFN0YXR1cyB+ICJyZWxhcHNlIiB0aGVuCiAgSW50ZXJ2YWxbc3RhcnQgb2YgY29uZGl0aW9uLm9uc2V0LnRvSW50ZXJ2YWwoKSwgZW5kIG9mIGNvbmRpdGlvbi5hYmF0ZW1lbnRJbnRlcnZhbCgpXQplbHNlCiAgSW50ZXJ2YWxbc3RhcnQgb2YgY29uZGl0aW9uLm9uc2V0LnRvSW50ZXJ2YWwoKSwgZW5kIG9mIGNvbmRpdGlvbi5hYmF0ZW1lbnRJbnRlcnZhbCgpKQoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRoZSB0YWlsIG9mIHRoZSBnaXZlbiB1cmkgKGkuZS4gZXZlcnl0aGluZyBhZnRlciB0aGUgbGFzdCBzbGFzaCBpbiB0aGUgVVJJKS4KQGNvbW1lbnQ6IFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBsb2dpY2FsIGlkIG9mIGEgZ2l2ZW4gcmVzb3VyY2UuIEl0IGNhbiBiZSB1c2VkIGluCmEgc2luZ2xlLXNlcnZlciBlbnZpcm9ubWVudCB0byB0cmFjZSByZWZlcmVuY2VzLiBIb3dldmVyLCB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IGF0dGVtcHQgdG8gcmVzb2x2ZQpvciBkaXN0aW5ndWlzaCB0aGUgYmFzZSBvZiB0aGUgZ2l2ZW4gdXJsLCBhbmQgc28gY2Fubm90IGJlIHVzZWQgc2FmZWx5IGluIG11bHRpLXNlcnZlciBlbnZpcm9ubWVudHMuCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gZ2V0SWQodXJpIFN0cmluZyk6CiAgTGFzdChTcGxpdCh1cmksICcvJykpCgovKgpAZGVzY3JpcHRpb246IEdpdmVuIGFuIGludGVydmFsLCByZXR1cm4gdHJ1ZSBpZiB0aGUgaW50ZXJ2YWwgaGFzIGEgc3RhcnRpbmcgYm91bmRhcnkgc3BlY2lmaWVkCihpLmUuIHRoZSBzdGFydCBvZiB0aGUgaW50ZXJ2YWwgaXMgbm90IG51bGwgYW5kIG5vdCB0aGUgbWluaW11bSBEYXRlVGltZSB2YWx1ZSkKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNTdGFydChwZXJpb2QgSW50ZXJ2YWw8RGF0ZVRpbWU+ICk6CiAgbm90ICggc3RhcnQgb2YgcGVyaW9kIGlzIG51bGwKICAgICAgb3Igc3RhcnQgb2YgcGVyaW9kID0gbWluaW11bSBEYXRlVGltZQogICkKCi8qCkBkZXNjcmlwdGlvbjogR2l2ZW4gYW4gaW50ZXJ2YWwsIHJldHVybnMgdHJ1ZSBpZiB0aGUgaW50ZXJ2YWwgaGFzIGFuIGVuZGluZyBib3VuZGFyeSBzcGVjaWZpZWQKKGkuZS4gdGhlIGVuZCBvZiB0aGUgaW50ZXJ2YWwgaXMgbm90IG51bGwgYW5kIG5vdCB0aGUgbWF4aW11bSBEYXRlVGltZSB2YWx1ZSkKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNFbmQocGVyaW9kIEludGVydmFsPERhdGVUaW1lPiApOgogIG5vdCAoCiAgICBlbmQgb2YgcGVyaW9kIGlzIG51bGwKICAgICAgb3IgZW5kIG9mIHBlcmlvZCA9IG1heGltdW0gRGF0ZVRpbWUKICApCgovKgpAZGVzY3JpcHRpb246IEdpdmVuIGFuIGludGVydmFsLCByZXR1cm5zIHRoZSBlbmRpbmcgcG9pbnQgaWYgdGhlIGludGVydmFsIGhhcyBhbiBlbmRpbmcgYm91bmRhcnkgc3BlY2lmaWVkLApvdGhlcndpc2UsIHJldHVybnMgdGhlIHN0YXJ0aW5nIHBvaW50CiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gbGF0ZXN0KGNob2ljZSBDaG9pY2U8RGF0ZVRpbWUsIFF1YW50aXR5LCBJbnRlcnZhbDxEYXRlVGltZT4sIEludGVydmFsPFF1YW50aXR5Pj4gKToKICAoY2hvaWNlLnRvSW50ZXJ2YWwoKSkgcGVyaW9kCiAgICByZXR1cm4KICAgICAgaWYgKHBlcmlvZC5oYXNFbmQoKSkgdGhlbiBlbmQgb2YgcGVyaW9kCiAgICAgIGVsc2Ugc3RhcnQgb2YgcGVyaW9kCgovKgpAZGVzY3JpcHRpb246IEdpdmVuIGFuIGludGVydmFsLCByZXR1cm4gdGhlIHN0YXJ0aW5nIHBvaW50IGlmIHRoZSBpbnRlcnZhbCBoYXMgYSBzdGFydGluZyBib3VuZGFyeSBzcGVjaWZpZWQsCm90aGVyd2lzZSwgcmV0dXJuIHRoZSBlbmRpbmcgcG9pbnQKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBlYXJsaWVzdChjaG9pY2UgQ2hvaWNlPERhdGVUaW1lLCBRdWFudGl0eSwgSW50ZXJ2YWw8RGF0ZVRpbWU+LCBJbnRlcnZhbDxRdWFudGl0eT4+ICk6CiAgKGNob2ljZS50b0ludGVydmFsKCkpIHBlcmlvZAogICAgcmV0dXJuCiAgICAgIGlmIChwZXJpb2QuaGFzU3RhcnQoKSkgdGhlbiBzdGFydCBvZiBwZXJpb2QKICAgICAgZWxzZSBlbmQgb2YgcGVyaW9kCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdGhlIG1vc3QgcmVjZW50IENvbmRpdGlvbgoqLwpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChjb25kaXRpb25zIExpc3Q8VVNDb3JlLkNvbmRpdGlvbj4pOgogIExhc3QoCiAgICBjb25kaXRpb25zIEMKICAgICAgc29ydCBieSByZWNvcmRlZERhdGUKICApCgovKgpAZGVzY3JpcHRpb246IFJldHVybiB0aGUgbW9zdCByZWNlbnQgT2JzZXJ2YXRpb24KKi8KZGVmaW5lIGZ1bmN0aW9uIE1vc3RSZWNlbnQob2JzZXJ2YXRpb25zIExpc3Q8T2JzZXJ2YXRpb24+KToKICBMYXN0KAogICAgb2JzZXJ2YXRpb25zIE8KICAgICAgc29ydCBieSBpc3N1ZWQKICApCgpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChvYnNlcnZhdGlvbnMgTGlzdDwiU21va2luZ1N0YXR1c1Byb2ZpbGUiPik6CiAgTGFzdCgKICAgIG9ic2VydmF0aW9ucyBPCiAgICAgIHNvcnQgYnkgaXNzdWVkCiAgKQoKZGVmaW5lIGZ1bmN0aW9uIE1vc3RSZWNlbnQob2JzZXJ2YXRpb25zIExpc3Q8IlB1bHNlT3hpbWV0cnlQcm9maWxlIj4pOgogIExhc3QoCiAgICBvYnNlcnZhdGlvbnMgTwogICAgICBzb3J0IGJ5IGlzc3VlZAogICkKCmRlZmluZSBmdW5jdGlvbiBNb3N0UmVjZW50KG9ic2VydmF0aW9ucyBMaXN0PCJQZWRpYXRyaWNXZWlnaHRGb3JIZWlnaHRPYnNlcnZhdGlvblByb2ZpbGUiPik6CiAgTGFzdCgKICAgIG9ic2VydmF0aW9ucyBPCiAgICAgIHNvcnQgYnkgaXNzdWVkCiAgKQoKICBkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChvYnNlcnZhdGlvbnMgTGlzdDwiUGVkaWF0cmljQk1JZm9yQWdlT2JzZXJ2YXRpb25Qcm9maWxlIj4pOgogIExhc3QoCiAgICBvYnNlcnZhdGlvbnMgTwogICAgICBzb3J0IGJ5IGlzc3VlZAogICkKCmRlZmluZSBmdW5jdGlvbiBNb3N0UmVjZW50KG9ic2VydmF0aW9ucyBMaXN0PCJMYWJvcmF0b3J5UmVzdWx0T2JzZXJ2YXRpb25Qcm9maWxlIj4pOgogIExhc3QoCiAgICBvYnNlcnZhdGlvbnMgTwogICAgICBzb3J0IGJ5IGlzc3VlZAogICkKCmRlZmluZSBmdW5jdGlvbiBNb3N0UmVjZW50KG9ic2VydmF0aW9ucyBMaXN0PCJvYnNlcnZhdGlvbi12aXRhbHNwYW5lbCI+KToKICBMYXN0KAogICAgb2JzZXJ2YXRpb25zIE8KICAgICAgc29ydCBieSBpc3N1ZWQKICApCgpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tcmVzcHJhdGUiPik6CiAgTGFzdCgKICAgIG9ic2VydmF0aW9ucyBPCiAgICAgIHNvcnQgYnkgaXNzdWVkCiAgKQogIAogIGRlZmluZSBmdW5jdGlvbiBNb3N0UmVjZW50KG9ic2VydmF0aW9ucyBMaXN0PCJvYnNlcnZhdGlvbi1oZWFydHJhdGUiPik6CiAgTGFzdCgKICAgIG9ic2VydmF0aW9ucyBPCiAgICAgIHNvcnQgYnkgaXNzdWVkCiAgKQoKICBkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tb3h5Z2Vuc2F0Ij4pOgogIExhc3QoCiAgICBvYnNlcnZhdGlvbnMgTwogICAgICBzb3J0IGJ5IGlzc3VlZAogICkKCiAgZGVmaW5lIGZ1bmN0aW9uIE1vc3RSZWNlbnQob2JzZXJ2YXRpb25zIExpc3Q8Im9ic2VydmF0aW9uLWJvZHl0ZW1wIj4pOgogIExhc3QoCiAgICBvYnNlcnZhdGlvbnMgTwogICAgICBzb3J0IGJ5IGlzc3VlZAogICkKCiAgZGVmaW5lIGZ1bmN0aW9uIE1vc3RSZWNlbnQob2JzZXJ2YXRpb25zIExpc3Q8Im9ic2VydmF0aW9uLWhlYWRjaXJjdW0iPik6CiAgTGFzdCgKICAgIG9ic2VydmF0aW9ucyBPCiAgICAgIHNvcnQgYnkgaXNzdWVkCiAgKQoKICBkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tYnAiPik6CiAgTGFzdCgKICAgIG9ic2VydmF0aW9ucyBPCiAgICAgIHNvcnQgYnkgaXNzdWVkCiAgKQoKZGVmaW5lIGZ1bmN0aW9uIE1vc3RSZWNlbnQob2JzZXJ2YXRpb25zIExpc3Q8Im9ic2VydmF0aW9uLWJtaSI+KToKICBMYXN0KAogICAgb2JzZXJ2YXRpb25zIE8KICAgICAgc29ydCBieSBpc3N1ZWQKICApCgpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tYm9keWhlaWdodCI+KToKICBMYXN0KAogICAgb2JzZXJ2YXRpb25zIE8KICAgICAgc29ydCBieSBpc3N1ZWQKICApCgpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChvYnNlcnZhdGlvbnMgTGlzdDwib2JzZXJ2YXRpb24tYm9keXdlaWdodCI+KToKICBMYXN0KAogICAgb2JzZXJ2YXRpb25zIE8KICAgICAgc29ydCBieSBpc3N1ZWQKICApCgpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudE1SKG1lZGljYXRpb25SZXF1ZXN0cyBMaXN0PCJNZWRpY2F0aW9uUmVxdWVzdFByb2ZpbGUiPik6CiAgTGFzdCgKICAgIG1lZGljYXRpb25SZXF1ZXN0cyBNUgogICAgICBzb3J0IGJ5IGF1dGhvcmVkT24KICApCgpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudFNSKHNlcnZpY2VSZXF1ZXN0cyBMaXN0PEZISVIuU2VydmljZVJlcXVlc3Q+KToKICBMYXN0KAogICAgc2VydmljZVJlcXVlc3RzIFNSCiAgICAgIHNvcnQgYnkgKEZISVJIZWxwZXJzLlRvRGF0ZVRpbWUoYXV0aG9yZWRPbikgYXMgRGF0ZVRpbWUpCiAgKQoKCmRlZmluZSBmdW5jdGlvbiBNb2JpbGUoY29udGFjdFBvaW50cyBMaXN0PFVTQ29yZS5Db250YWN0UG9pbnQ+KToKICBzaW5nbGV0b24gZnJvbSAoY29udGFjdFBvaW50cyBQIHdoZXJlIFAudXNlID0gJ21vYmlsZScpCgo="
  } ]
}